<form class="filters block" method="get" action="/zproveart">

  <!-- ARRIBA: 2 columnas -->
  <div class="filters-top">

    <!-- IZQ: familias -->
    <div class="filters-box filters-box--familias">
      <div class="filter-title">Familias</div>

      <div class="fam-list">
        {% for f in families %}
          <label class="fam-item">
            <input type="checkbox" name="family" value="{{ f.COD_FAM_0|string }}"
              {% if (f.COD_FAM_0|string) in family_list %}checked{% endif %}>
            <span class="fam-text">{{ f.COD_FAM_0 }} - {{ f.DES_FAM_0 }}</span>
          </label>
        {% endfor %}
      </div>
    </div>

    <!-- DER: filtros -->
    <div class="filters-box filters-box--filtros">
      <div class="filter-title">Filtros</div>

      <div class="filters-right">

        <!-- Fecha -->
        <div class="filter-group">
          <div class="filter-title small">Fecha</div>
          <div class="filter-row">
            <label class="muted">Desde</label>
            <input type="date" name="from" value="{{ date_from }}">
            <label class="muted">Hasta</label>
            <input type="date" name="to" value="{{ date_to }}">
          </div>
        </div>

        <!-- Proveedor -->
        <div class="filter-group">
          <div class="filter-title small">Proveedor</div>
          <div class="filter-row">
            <label class="muted">Desde</label>

            <div class="lookup-wrap">
              <input type="text"
                    name="supp_from"
                    id="supp_from"
                    inputmode="numeric"
                    pattern="\d{5}"
                    maxlength="5"
                    value="{{ supp_from or '' }}">
              <button type="button" class="lookup-btn"
                      onclick="openLookupPopup('supplier','supp_from')"
                      title="Buscar proveedor">ğŸ”</button>
            </div>

            <label class="muted">Hasta</label>

            <div class="lookup-wrap">
              <input type="text"
                    name="supp_to"
                    id="supp_to"
                    inputmode="numeric"
                    pattern="\d{5}"
                    maxlength="5"
                    value="{{ supp_to or '' }}">
              <button type="button" class="lookup-btn"
                      onclick="openLookupPopup('supplier','supp_to')"
                      title="Buscar proveedor">ğŸ”</button>
            </div>
          </div>
        </div>

        <!-- Comprador -->
        <div class="filter-group">
          <div class="filter-title small">Comprador</div>
          <div class="filter-row">
            <label class="muted">Desde</label>

            <div class="lookup-wrap">
              <input type="text"
                    name="comp_from"
                    id="comp_from"
                    maxlength="4"
                    value="{{ comp_from or '' }}">
              <button type="button" class="lookup-btn"
                      onclick="openLookupPopup('buyer','comp_from')"
                      title="Seleccionar comprador">ğŸ”</button>
            </div>

            <label class="muted">Hasta</label>

            <div class="lookup-wrap">
              <input type="text"
                    name="comp_to"
                    id="comp_to"
                    maxlength="4"
                    value="{{ comp_to or '' }}">
              <button type="button" class="lookup-btn"
                      onclick="openLookupPopup('buyer','comp_to')"
                      title="Seleccionar comprador">ğŸ”</button>
            </div>
          </div>
        </div>


        <!-- ArtÃ­culo -->
        <div class="filter-group">
          <div class="filter-title small">ArtÃ­culo</div>
          <div class="filter-row">
            <label class="muted">Desde</label>
            <input type="text"
                   name="art_from"
                   maxlength="13"
                   pattern="\d{13}"
                   value="{{ art_from or '' }}">
            <label class="muted">Hasta</label>
            <input type="text"
                   name="art_to"
                   maxlength="13"
                   pattern="\d{13}"
                   value="{{ art_to or '' }}">
          </div>
        </div>

      </div>
    </div>

  </div>

  <!-- ABAJO: subfamilias -->
  <div class="filters-box filters-box--subfams">
    <div class="filter-title">Subfamilias</div>
    <div id="subfamContainer" class="subfam-container"></div>
  </div>

  <!-- ACCIONES -->
  <div class="filters-actions">
    <input type="hidden" name="page" value="1">
    <button class="btn btn-secondary" type="submit">Aplicar</button>
    <button class="btn btn-primary" type="button" id="btnPdf">
      <span class="spinner" aria-hidden="true"></span>
      <span class="btn-text">Generar PDF</span>
    </button>
  </div>

</form>